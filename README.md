```
#Up containers
source .env
docker-compose -f db-docker-compose.yaml up -d
docker-compose up -d

#Create idp hydra client with localhost callbacks
./scripts/populate.sh

go build
./idp -api=true

IF IT DOESN'T WORK TRY THINGS BELOW

docker exec -it hydra hydra clients create \
 --endpoint http://localhost:4445 \
    --id idp \
    --secret idp-secret \
    --response-types code,id_token \
    --grant-types refresh_token,authorization_code \
    --scope openid,offline \
    --callbacks https://localhost:3000/api/callback
#Now you can access localhost:4444 - hydra public port, localhost:4445 - hydra admin port


go mod vendor
go mod tidy

go run .
```
-------------------------------------------------------------------------------
FYI
https://medium.com/12plus1/oauth2-with-ory-hydra-vapor-3-and-ios-12-ca0e61c28f5a

https://github.com/segmentio/ory-hydra/blob/master/docs/oauth2.md


Local certs generated by https://github.com/FiloSottile/mkcert
# IDP


Create IDP client

```
docker exec -it `docker ps -f name=idp_hydra -q` \
    hydra clients create \
    --endpoint http://hydra:4445 \
    --id idp \
    --secret idp-secret \
    --response-types code,id_token \
    --grant-types refresh_token,authorization_code \
    --scope openid,offline \
    --callbacks https://id.hiveon.net:3000/callback
```

Create IDP test example client

```
docker exec -it `docker ps -f name=idp_hydra -q` \
    hydra clients create \
    --endpoint http://hydra:4445 \
    --id id-portal \
    --secret id-portal-secret \
    --response-types code,id_token \
    --grant-types refresh_token,authorization_code \
    --scope openid,offline \
    --callbacks http://127.0.0.1:8000/callback
```

FYI
https://medium.com/12plus1/oauth2-with-ory-hydra-vapor-3-and-ios-12-ca0e61c28f5a

https://github.com/segmentio/ory-hydra/blob/master/docs/oauth2.md


Local certs generated by https://github.com/FiloSottile/mkcert
# IDP


Create IDP client

```
docker exec -it `docker ps -f name=idp_hydra -q` \
    hydra clients create \
    --endpoint http://hydra:4445 \
    --id idp \
    --secret idp-secret \
    --response-types code,id_token \
    --grant-types refresh_token,authorization_code \
    --scope openid,offline \
    --callbacks http://127.0.0.1:5555/callback
```

Create IDP test example client

```
docker exec -it `docker ps -f name=idp_hydra -q` \
    hydra clients create \
    --endpoint http://hydra:4445 \
    --id id-portal \
    --secret id-portal-secret \
    --response-types code,id_token \
    --grant-types refresh_token,authorization_code \
    --scope openid,offline \
    --callbacks http://127.0.0.1:8000/callback
```

FYI
https://medium.com/12plus1/oauth2-with-ory-hydra-vapor-3-and-ios-12-ca0e61c28f5a

https://github.com/segmentio/ory-hydra/blob/master/docs/oauth2.md


Local certs generated by https://github.com/FiloSottile/mkcert
